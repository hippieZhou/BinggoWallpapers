<?xml version="1.0" encoding="utf-8" ?>
<ContentDialog
    x:Class="BinggoWallpapers.WinUI.UserControls.SynchronizationDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="using:Microsoft.Xaml.Interactivity"
    xmlns:local="using:BinggoWallpapers.WinUI.UserControls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="数据同步"
    CloseButtonCommand="{x:Bind ViewModel.CloseCommand}"
    CloseButtonText="取消"
    Closing="OnClosing"
    FullSizeDesired="False"
    IsPrimaryButtonEnabled="{x:Bind ViewModel.IsLoading, Mode=OneWay, Converter={StaticResource InverseBoolToBooleanConverter}}"
    Opened="OnOpened"
    PrimaryButtonCommand="{x:Bind ViewModel.SyncCommand}"
    PrimaryButtonText="开始"
    Style="{StaticResource DefaultContentDialogStyle}"
    mc:Ignorable="d">
    <!--<i:Interaction.Behaviors>
        <i:EventTriggerBehavior EventName="Loaded">
            <i:InvokeCommandAction Command="{x:Bind ViewModel.LoadedCommand}" />
        </i:EventTriggerBehavior>
    </i:Interaction.Behaviors>-->

    <Grid Width="400" RowSpacing="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <TextBlock
            Grid.Row="0"
            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
            Style="{StaticResource CaptionTextBlockStyle}"
            Text="{x:Bind ViewModel.Message, Mode=OneWay}" />
        <ProgressRing
            Grid.Row="1"
            Width="100"
            Height="100"
            IsIndeterminate="{x:Bind ViewModel.IsLoading, Mode=OneWay}" />
        <TextBlock
            Grid.Row="2"
            HorizontalAlignment="Center"
            Style="{StaticResource BodyStrongTextBlockStyle}"
            Text="{x:Bind ViewModel.Duration, Mode=OneWay, Converter={StaticResource StringFormatConverter}, ConverterParameter={}{0} s}"
            TextLineBounds="TrimToCapHeight"
            TextWrapping="NoWrap" />
    </Grid>
</ContentDialog>
